var modules=["GoogleMapsModule","SoundcloudModule","TwilioModule","GeneralServiceModule","RestServiceModule","AccountServiceModule"],app=angular.module("APIDemo",modules,["$interpolateProvider",function(a){a.startSymbol("<%"),a.endSymbol("%>")}]);app.directive("spinner",function(){return{restrict:"A",replace:!0,scope:{startSpinner:"=spin"},template:"<div></div>",link:function(a,b,c){var d={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9},e=new Spinner(d);a.$watch("startSpinner",function(a){a?e.spin(b[0]):e.stop()})}}}),app.directive("knob",function(){return{restrict:"A",replace:!1,scope:{knobValue:"=time"},link:function(a,b,c){a.$watch("knobValue",function(a){b.knob({format:function(a){return a+" min"}}),b.val(a).trigger("change")})}}});var accountService=angular.module("AccountServiceModule",["RestServiceModule"]);accountService.factory("accountService",["RestService",function(a){function b(a,b){var c=document.getElementById(b);c.style.border=a[b].length>0?"none":"1px solid red"}function c(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)}var d={};return d.checkCurrentUser=function(b){console.log("ACCOUNT SERVICE: Check Current User "),a.get({resource:"currentuser",id:null},function(a){console.log("ACCOUNT SERVICE RESPONSE == "+JSON.stringify(a)),null!=b&&b(a)})},d.register=function(d,e){for(var f=[{firstName:"First Name"},{lastName:"Last Name"},{email:"Email"}],g=null,h=0;h<f.length;h++){var i=f[h],j=Object.keys(i)[0];if(0==d[j].length){b(d,j),g=i[j];break}}return null!=g?void(null!=e&&e(null,{message:"Missing "+g})):0==c(d.email)?void(null!=e&&e(null,{message:"Invalid Email"})):void a.post({resource:"profile",id:null},d,function(a){return console.log("ACCOUNT SERVICE RESPONSE == "+JSON.stringify(a)),"success"!=a.confirmation?void(null!=e&&e(null,{message:a.message})):void(null!=e&&e(a,null))})},d.updateProfile=function(b,c){a.update({resource:"profile",id:b.id},b,function(a){return console.log("ACCOUNT SERVICE RESPONSE == "+JSON.stringify(a)),"success"!=a.confirmation?void(null!=c&&c(null,{message:a.message})):void(null!=c&&c(a,null))})},d.login=function(b,d){return 0==b.email.length?void alert("Please enter your email"):0==b.password.length?void alert("Please enter your password"):0==c(b.email)?void alert("Please enter a valid email"):void a.post({resource:"login",id:null},b,function(a){return console.log("ACCOUNT SERVICE RESPONSE == "+JSON.stringify(a)),"success"!=a.confirmation?void(null!=d&&d(null,{message:a.message})):void(null!=d&&d(a,null))})},d}]);var generalService=angular.module("GeneralServiceModule",[]);generalService.factory("generalService",[function(){var a={};return a.truncatedText=function(a,b){return a.length<b?a:a.substring(0,b)+"..."},a.formattedDate=function(a){var b=moment(new Date(a)).format("MMM D, YYYY");return b},a.convertToLinks=function(a){var b;return b=/(\b(https?):\/\/[-A-Z0-9+&amp;@#\/%?=~_|!:,.;]*[-A-Z0-9+&amp;@#\/%=~_|])/gi,replacedText=a.replace(b,'<a class="colored-link-1" title="$1" href="$1" target="_blank">$1</a>'),replacePattern2=/(^|[^\/])(www\.[\S]+(\b|$))/gim,replacedText=replacedText.replace(replacePattern2,'$1<a class="colored-link-1" href="http://$2" target="_blank">$2</a>'),replacedText},a.parseLocation=function(a){var b=location.href.replace(window.location.origin,""),c={page:null,identifier:null,params:{}},d=b.split("?");if(d.length>1){for(var e=d[1],f=e.split("&"),g={},h=0;h<f.length;h++){var i=f[h].split("=");i.length<1||(g[i[0]]=i[1])}c.params=g}b=d[0];var j=b.split(a+"/");if(j.length>1)for(var k=j[1].split("/"),h=0;h<k.length;h++)0==h&&(c.page=k[h]),1==h&&(c.identifier=k[h]);return c},a}]);var restService=angular.module("RestServiceModule",["ngResource"]);restService.factory("RestService",["$resource",function(a){return a("/api/:resource/:id",{},{query:{method:"GET",params:{},isArray:!1},get:{method:"GET"},post:{method:"POST"},put:{method:"PUT"},update:{method:"PUT"}})}]);var googleMapsCtr=angular.module("GoogleMapsModule",[]);googleMapsCtr.controller("GoogleMapsController",["$scope","generalService","RestService",function(a,b,c){function d(b){c.query({resource:"foursquare",ll:b},function(b){a.venues=b.response.venues,console.log("FOURSQUARE:"+JSON.stringify(a.venues))})}a.generalService=b,a.address="",a.init=function(){},a.geocode=function(){c.query({resource:"googlemaps",address:a.address},function(a){var b=a.results,c=b[0],e=c.geometry,f=e.location,g=f.lat+","+f.lng;d(g)})}}]);var soundcloudCtr=angular.module("SoundcloudModule",[]);soundcloudCtr.controller("SoundcloudController",["$scope","generalService","RestService",function(a,b,c){a.generalService=b,a.username="",a.init=function(){console.log("SoundcloudController: INIT")},a.fetchSoundcloudTracks=function(){console.log("fetchSoundcloudTracks: "+JSON.stringify(a.username)),c.query({resource:"soundcloud",username:a.username},function(b){var c=b.results;console.log(JSON.stringify(c)),a.tracks=c})}}]);var twilioCtr=angular.module("TwilioModule",[]);twilioCtr.controller("TwilioController",["$scope","generalService","RestService",function(a,b,c){a.generalService=b,a.recipient="",a.message="",a.init=function(){console.log("TwilioController: INIT")},a.sendSMS=function(){var b=a.recipient.replace("-",""),b=b.replace("-",""),d={recipient:b,message:a.message};console.log("SEND SMS:"+JSON.stringify(d)),c.post({resource:"twilio",id:null},d,function(a){console.log(JSON.stringify(a))})}}]);